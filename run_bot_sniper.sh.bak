#!/bin/bash
cd "$(dirname "$0")" || exit 1

if [ -z "$TWELVEDATA_API_KEY" ]; then
  echo "Error: TWELVEDATA_API_KEY environment variable not set"
  echo "  export TWELVEDATA_API_KEY= c13f966de04f4939b4325bb55cf7ffc0"
  exit 1
fi

PORT=${PORT:-8080}
LOGFILE="$HOME/silvercoin-backend/backend.log"

echo "[launcher] Starting backend (PORT=$PORT) - logging to $LOGFILE"
exec gunicorn backend:app -b 0.0.0.0:$PORT -k aiohttp.GunicornWebWorker --log-file "$LOGFILE" --access-logfile "$LOGFILE"
